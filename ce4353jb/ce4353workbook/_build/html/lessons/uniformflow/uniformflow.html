
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Uniform Flow &#8212; CE 4353 Design of Hydraulic Systems</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Gutter Flow and Gravity Sewer Design" href="gutters.html" />
    <link rel="prev" title="Supercritical Contractions and Expansions" href="../momentum/contractions.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/river.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">CE 4353 Design of Hydraulic Systems</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro.html">
   Hydraulic Systems Design/Open Channel Flow
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/introduction.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../computationaltools/computationaltools.html">
   Computational Tools
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../computationaltools/topic1-1.html">
     Jupyter Notebooks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../computationaltools/topic1-2.html">
     Excel/Libre Office Spreadsheets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../computationaltools/topic1-3.html">
     HEC-RAS River Analysis Software
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../computationaltools/1goodgraphs.html">
     Characteristics of a Good Graph
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../computationaltools/2makinggraphs.html">
     The
     <code class="docutils literal notranslate">
      <span class="pre">
       matplotlib
      </span>
     </code>
     package
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../computationaltools/3adddata.html">
     Adding Data to Plot Lists
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../computationaltools/4loglogcharts.html">
     Logarithmic Charts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../computationaltools/5othercharts.html">
     Other Graph Types
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../basicprinciples/basicprinciples.html">
   Basic Principles
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../basicprinciples/topic2-1.html">
     Solution of Open Channel Problems
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../basicprinciples/topic2-2.html">
     Definitions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../basicprinciples/topic2-3.html">
     Discharge Measurements
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../specificenergy/specificenergy1.html">
   Specific Energy
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../specificenergy/specificenergy2.html">
     Froude Number
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../weirs/weirs.html">
   Weirs
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../momentum/momentum1.html">
   Momentum
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../momentum/momentum2.html">
     Rectangular Cross Sections
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../momentum/momentum3.html">
     Surges
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../momentum/momentum4.html">
     Bridge Piers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../momentum/momentum5.html">
     Spur Dikes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../momentum/stillingbasins.html">
     Stilling Basins
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../momentum/contractions.html">
     Supercritical Contractions and Expansions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="current reference internal" href="#">
   Uniform Flow
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="gutters.html">
     Gutter Flow and Gravity Sewer Design
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="compoundchannels.html">
     Compound Channels
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/lessons/uniformflow/uniformflow.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/jupyter-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Flessons/uniformflow/uniformflow.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/docs/lessons/uniformflow/uniformflow.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#manning-chezy">
   Manning-Chezy
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#composite-sections">
   Composite Sections
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-4-1">
     Example 4.1
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-4-2">
     Example 4-2
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="uniform-flow">
<h1>Uniform Flow<a class="headerlink" href="#uniform-flow" title="Permalink to this headline">¶</a></h1>
<p>Uniform flow occurs when the average velocities in successive cross sections of a channel are the same. This occurs only when the cross section is constant. Non-uniform flow results from gradual or sudden changes in the cross sectional area.
If the water surface is parallel to the channel bottom, flow is uniform and the water surface is at normal depth <span class="math notranslate nohighlight">\(y_n\)</span></p>
<p>Used for design of long open channels with the goal to have the water surface slope equal to the bed slope.  Heres a couple of pictures,</p>
<p>First a Central Aridzona Project canal</p>
<p><img alt="" src="../../_images/CAPcanal.png" /></p>
<p>And the Central Valley Project (Callyfornia) canal I grew up swimmin’ in.</p>
<p><img alt="" src="../../_images/CVPcanal.png" /></p>
<p>The line of floaty balls means you are approaching one of these:</p>
<p><img alt="" src="../../_images/CVPliftStation.png" /></p>
<p>Even though swimmin’ in the canals is illegal, the operators dont want to turn a bunch of kids into fish food, so they put up the balls.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Despite the obvious Darwinian advantage of grinding up kids - dead meat does not pay taxes; support old folks; nor serve as a supply of harvestable kidneys.  Hence we try to save them.</p>
</div>
<p>In these applications the resistance to flow is balanced by a driving force provided by gravity.</p>
<p>Resistance is a consequence of cross-section shape, soil, vegetation, materials (in engineered channels).  In pipelines the resistance was understood by laboratory experimenters by the 1930’s.  In open channels interest started later</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Obviously people have built working open channels much earlier, but techniques of design were empirical passed down by secret societies who wore wizard hats and flew on brooms!</p>
</div>
<p>Consider a generic force balance diagram over a short section of channel, <span class="math notranslate nohighlight">\(\Delta L\)</span> long:</p>
<p><img alt="" src="../../_images/controlvolume1.png" /></p>
<p>Now insert the Energy Grade Line (EGL)</p>
<p><img alt="" src="../../_images/cvcomplete.png" /></p>
<p>In the case of uniform flow the flow depths are the same at each end of the section, the section length is such that the end areas are about the same, hence the upstream and downstream pressure force are the same, and the remaining forces are gravity (drive) and friction:</p>
<div class="math notranslate nohighlight">
\[ W sin \theta = \rho g A \Delta L sin \theta = Fr \]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the above expression <span class="math notranslate nohighlight">\(Fr\)</span> is the frictional shear force, not the Froude number.  Use the principle of algebraic substitution, and give friction any name you want in the drawing, except Elroy</p>
</div>
<p>If friction is stipulated to be generated only by the shear force induced at the solid-liquid interface (and not at the free surface) then the expression becomes</p>
<div class="math notranslate nohighlight">
\[ \rho g A \Delta L sin \theta = \tau_0 P \Delta L \]</div>
<p>where <span class="math notranslate nohighlight">\(P\)</span> is the wetted perimeter</p>
<p>Divide by <span class="math notranslate nohighlight">\(P \Delta L\)</span> to obtain</p>
<div class="math notranslate nohighlight">
\[ \frac{\rho g A \Delta L sin \theta}{P \Delta L} = \tau_0  \]</div>
<p>observe the hydraulic radius, <span class="math notranslate nohighlight">\(R_h = \frac{A}{P}\)</span> appears</p>
<div class="math notranslate nohighlight">
\[ \rho g R_h sin \theta = \tau_0  \]</div>
<p>The boundary shear stress is the factor that expresses the resistance properties of the fluid (wasser) and the solid material (conduit wall).  A usual simplification is to observe that the angle is usuall pretty small so that</p>
<div class="math notranslate nohighlight">
\[ sin \theta~\approx~S_0 \]</div>
<p>In pipe flow (CE 3305) the shear stress was something like</p>
<div class="math notranslate nohighlight">
\[ \tau_0 = \frac{f \rho V^2}{8}\]</div>
<p>Or more usefully (in that context)</p>
<div class="math notranslate nohighlight">
\[ f= \frac{8\tau_0}{\rho V^2}\]</div>
<p>And one either looked up a value in the Moody chart or applied Swammee-Jain equations to find <span class="math notranslate nohighlight">\(f\)</span> for various Reynolds numbers and material relative roughness.</p>
<p>Returning to our situation we have</p>
<div class="math notranslate nohighlight">
\[ \frac{\Delta h}{\Delta L}= \frac{\tau_O}{\rho g R}=\frac{\frac{f \rho V^2}{8}}{\rho g R}= \frac{f}{4R}\frac{V^2}{2g}\]</div>
<p>So now we need some way to express <span class="math notranslate nohighlight">\(f\)</span>.</p>
<div class="section" id="manning-chezy">
<h2>Manning-Chezy<a class="headerlink" href="#manning-chezy" title="Permalink to this headline">¶</a></h2>
<p><strong>Chezy Correlation</strong></p>
<div class="math notranslate nohighlight">
\[V = (\frac{8g}{f})^{1/2} \sqrt{R S_0} = C \sqrt{R S_0}\]</div>
<p>and the value <span class="math notranslate nohighlight">\(C\)</span> is the Chezy coefficient.</p>
<p><strong>Manning Correlation</strong></p>
<p>Manning several years before his football career developed a similar correlation but observed that the hydraulic radius varied by the 2/3 power as</p>
<div class="math notranslate nohighlight">
\[V  = C R^{2/3} S_0^{1/2}\]</div>
<p>There is meaningful theory to relate surface roughness to the “<span class="math notranslate nohighlight">\(C\)</span>” values</p>
<p><img alt="" src="../../_images/velocitydistributions.png" /></p>
<p>From here one can relate the friction factor back to Manning’s n or the Chezy coefficient:</p>
<p><img alt="" src="../../_images/mann_n-explain.png" /></p>
<p>The usual way to specify Manning’s n is by a table lookup such as <a class="reference external" href="http://54.243.252.9/toolbox/Databases/ManningN/ManningsN.html">http://54.243.252.9/toolbox/Databases/ManningN/ManningsN.html</a></p>
<p>or tables similar to those in our book</p>
<p><img alt="" src="../../_images/mann1.png" />
<img alt="" src="../../_images/mann2.png" />
<img alt="" src="../../_images/mann3.png" />
<img alt="" src="../../_images/mann4.png" /></p>
<p>or by comparison with photographs of channels</p>
<ol class="simple">
<li><p>Barnes, 1967 (A classic reference document) <a class="reference external" href="https://pubs.usgs.gov/wsp/wsp_1849/pdf/wsp_1849.pdf">https://pubs.usgs.gov/wsp/wsp_1849/pdf/wsp_1849.pdf</a></p></li>
<li><p><a class="reference external" href="https://www.usgs.gov/centers/sawsc/science/mannings-roughness-coefficients-south-carolina-streams#overview">https://www.usgs.gov/centers/sawsc/science/mannings-roughness-coefficients-south-carolina-streams#overview</a></p></li>
<li><p><a class="reference external" href="https://pubs.usgs.gov/ds/668/pdf/DataSeries_668_2.pdf">https://pubs.usgs.gov/ds/668/pdf/DataSeries_668_2.pdf</a></p></li>
</ol>
<p>and many others.</p>
</div>
<div class="section" id="composite-sections">
<h2>Composite Sections<a class="headerlink" href="#composite-sections" title="Permalink to this headline">¶</a></h2>
<p><img alt="" src="../../_images/compositesections1.png" /></p>
<p><img alt="" src="../../_images/compositesectionstxdot.png" /></p>
<p>Normal Flow Calculations</p>
<div class="math notranslate nohighlight">
\[Q=VA= \frac{K_n}{n} A R^{2/3} S_0^{1/2}\]</div>
<p>where <span class="math notranslate nohighlight">\(S_0\)</span> is the bed slope, <span class="math notranslate nohighlight">\(S_f\)</span> is the slope of the energy grade line (called the friction slope).</p>
<p>Typical cases:</p>
<ol class="simple">
<li><p>Know <span class="math notranslate nohighlight">\(y_0\)</span> or <span class="math notranslate nohighlight">\(y_n\)</span>, shape, <span class="math notranslate nohighlight">\(S_0\)</span>,<span class="math notranslate nohighlight">\(n\)</span>, compute <span class="math notranslate nohighlight">\(Q\)</span> directly.</p></li>
<li><p>Know <span class="math notranslate nohighlight">\(y_0\)</span>, shape, <span class="math notranslate nohighlight">\(Q\)</span>,<span class="math notranslate nohighlight">\(n\)</span>, compute <span class="math notranslate nohighlight">\(S_0\)</span> directly.</p></li>
<li><p>Know shape, <span class="math notranslate nohighlight">\(Q\)</span>,<span class="math notranslate nohighlight">\(n\)</span>,<span class="math notranslate nohighlight">\(S_0\)</span> compute <span class="math notranslate nohighlight">\(y_0\)</span> iteratively.</p></li>
</ol>
<div class="section" id="example-4-1">
<h3>Example 4.1<a class="headerlink" href="#example-4-1" title="Permalink to this headline">¶</a></h3>
<p>A trapezoidal channel has a bottom width of 20 feets with 2:1 side slopes, bed slope is 0.001.  Design discharge is 1000 cubic feets persecond.  Manning’s n is 0.027.  Find normal depth.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># prototype functions</span>

<span class="k">def</span> <span class="nf">Qman</span><span class="p">(</span><span class="n">Kn</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">R</span><span class="p">,</span><span class="n">S</span><span class="p">):</span>
    <span class="n">Qman</span><span class="o">=</span><span class="p">(</span><span class="n">Kn</span><span class="o">/</span><span class="n">n</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">R</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">S</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
    <span class="k">return</span><span class="p">(</span><span class="n">Qman</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">TopTrap</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="n">TopTrap</span><span class="o">=</span><span class="n">b</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">m</span><span class="o">*</span><span class="n">y</span>
    <span class="k">return</span><span class="p">(</span><span class="n">TopTrap</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">AreaTrap</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="n">AreaTrap</span><span class="o">=</span><span class="n">y</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="o">+</span><span class="n">m</span><span class="o">*</span><span class="n">y</span><span class="p">)</span>
    <span class="k">return</span><span class="p">(</span><span class="n">AreaTrap</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">PerTrap</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="n">PerTrap</span><span class="o">=</span><span class="n">b</span> <span class="o">+</span> <span class="p">(</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="n">m</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="n">m</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> 
    <span class="k">return</span><span class="p">(</span><span class="n">PerTrap</span><span class="p">)</span>  

<span class="n">Qdesign</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">Slope</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="n">Mann</span> <span class="o">=</span> <span class="mf">0.027</span>
<span class="n">SideSlope</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">Bottom</span> <span class="o">=</span> <span class="mi">20</span>

<span class="c1"># Using Newton&#39;s Method</span>

<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">newton</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">Qdesign</span><span class="p">,</span><span class="n">Slope</span><span class="p">,</span><span class="n">Mann</span><span class="p">,</span><span class="n">SideSlope</span><span class="p">,</span><span class="n">Bottom</span> <span class="c1">#set as global variables so can access from outside the function.  DANGER WILLY!</span>
    <span class="n">area</span> <span class="o">=</span> <span class="n">AreaTrap</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">SideSlope</span><span class="p">,</span><span class="n">Bottom</span><span class="p">)</span>
    <span class="n">perimeter</span> <span class="o">=</span> <span class="n">PerTrap</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">SideSlope</span><span class="p">,</span><span class="n">Bottom</span><span class="p">)</span>
    <span class="n">radius</span> <span class="o">=</span> <span class="n">area</span><span class="o">/</span><span class="n">perimeter</span>
    <span class="n">Qout</span> <span class="o">=</span> <span class="n">Qman</span><span class="p">(</span><span class="mf">1.49</span><span class="p">,</span><span class="n">Mann</span><span class="p">,</span><span class="n">area</span><span class="p">,</span><span class="n">radius</span><span class="p">,</span><span class="n">Slope</span><span class="p">)</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">Qout</span><span class="o">-</span><span class="n">Qdesign</span>
    <span class="k">return</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">yguess</span> <span class="o">=</span>  <span class="mf">10.507</span>
<span class="c1">#print(newton(f, yguess))</span>
<span class="n">ysolve</span> <span class="o">=</span> <span class="n">newton</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">yguess</span><span class="p">)</span>
<span class="n">area</span> <span class="o">=</span> <span class="n">AreaTrap</span><span class="p">(</span><span class="n">ysolve</span><span class="p">,</span><span class="n">SideSlope</span><span class="p">,</span><span class="n">Bottom</span><span class="p">)</span>
<span class="n">perimeter</span> <span class="o">=</span> <span class="n">PerTrap</span><span class="p">(</span><span class="n">ysolve</span><span class="p">,</span><span class="n">SideSlope</span><span class="p">,</span><span class="n">Bottom</span><span class="p">)</span>
<span class="n">radius</span> <span class="o">=</span> <span class="n">area</span><span class="o">/</span><span class="n">perimeter</span>
<span class="n">Qout</span> <span class="o">=</span> <span class="n">Qman</span><span class="p">(</span><span class="mf">1.49</span><span class="p">,</span><span class="n">Mann</span><span class="p">,</span><span class="n">area</span><span class="p">,</span><span class="n">radius</span><span class="p">,</span><span class="n">Slope</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;y_n is&quot;</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="n">ysolve</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="s2">&quot; feet </span><span class="se">\n</span><span class="s2">Computed Discharge is &quot;</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="n">Qout</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="s2">&quot; CFS&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Flow Balance Error is &quot;</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="n">Qout</span> <span class="o">-</span> <span class="n">Qdesign</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>y_n is 6.497  feet 
Computed Discharge is  1000.0  CFS
Flow Balance Error is  0.0
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="example-4-2">
<h3>Example 4-2<a class="headerlink" href="#example-4-2" title="Permalink to this headline">¶</a></h3>
<p>Parabolic drainage channel has maximum topwodth of 30 ft. Design flow is 80 CFS. Bed slope is 0.005. Manning’s n is 0.040. Find normal depth in the channel.</p>
<p><img alt="" src="../../_images/parabolicgeometry.png" /></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># simply reuse code</span>

<span class="k">def</span> <span class="nf">Qman</span><span class="p">(</span><span class="n">Kn</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">R</span><span class="p">,</span><span class="n">S</span><span class="p">):</span>
    <span class="n">Qman</span><span class="o">=</span><span class="p">(</span><span class="n">Kn</span><span class="o">/</span><span class="n">n</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">R</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">S</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
    <span class="k">return</span><span class="p">(</span><span class="n">Qman</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">TopPara</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="n">TopPara</span><span class="o">=</span><span class="n">b</span><span class="o">*</span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">h</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span><span class="p">(</span><span class="n">TopPara</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">AreaPara</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="n">AreaPara</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="n">y</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="o">*</span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">h</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
    <span class="k">return</span><span class="p">(</span><span class="n">AreaPara</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">PerPara</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="kn">import</span> <span class="nn">math</span>
    <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="o">*</span><span class="n">y</span><span class="o">/</span><span class="n">b</span>
    <span class="n">t1</span><span class="o">=</span><span class="mi">1</span><span class="o">+</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span>
    <span class="n">t2</span><span class="o">=</span><span class="n">t1</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">t3</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="n">x</span>
    <span class="n">PerPara</span><span class="o">=</span><span class="p">(</span><span class="n">b</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">t2</span> <span class="o">+</span> <span class="n">t3</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">t2</span><span class="p">))</span>
    <span class="k">return</span><span class="p">(</span><span class="n">PerPara</span><span class="p">)</span>  

<span class="n">Qdesign</span> <span class="o">=</span> <span class="mi">80</span>
<span class="n">Slope</span> <span class="o">=</span> <span class="mf">0.005</span>
<span class="n">Mann</span> <span class="o">=</span> <span class="mf">0.040</span>
<span class="n">Bmax</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">Ymax</span> <span class="o">=</span> <span class="mf">1.55</span> <span class="c1">#&lt;&lt;&lt; need to specify this value, not provided in the example, by a little trial-and-error to macth book solution</span>

<span class="c1"># Using Newton&#39;s Method</span>

<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">newton</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">Qdesign</span><span class="p">,</span><span class="n">Slope</span><span class="p">,</span><span class="n">Mann</span><span class="p">,</span><span class="n">Ymax</span><span class="p">,</span><span class="n">Bmax</span> <span class="c1">#set as global variables so can access from outside the function.  DANGER WILLY!</span>
    <span class="n">area</span> <span class="o">=</span> <span class="n">AreaPara</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">Ymax</span><span class="p">,</span><span class="n">Bmax</span><span class="p">)</span>
    <span class="n">perimeter</span> <span class="o">=</span> <span class="n">PerPara</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">Ymax</span><span class="p">,</span><span class="n">Bmax</span><span class="p">)</span>
    <span class="n">radius</span> <span class="o">=</span> <span class="n">area</span><span class="o">/</span><span class="n">perimeter</span>
    <span class="n">Qout</span> <span class="o">=</span> <span class="n">Qman</span><span class="p">(</span><span class="mf">1.49</span><span class="p">,</span><span class="n">Mann</span><span class="p">,</span><span class="n">area</span><span class="p">,</span><span class="n">radius</span><span class="p">,</span><span class="n">Slope</span><span class="p">)</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">Qout</span><span class="o">-</span><span class="n">Qdesign</span>
    <span class="k">return</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">yguess</span> <span class="o">=</span>  <span class="n">Ymax</span>
<span class="c1">#print(newton(f, yguess))</span>
<span class="n">ysolve</span> <span class="o">=</span> <span class="n">newton</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">yguess</span><span class="p">)</span>
<span class="n">area</span> <span class="o">=</span> <span class="n">AreaPara</span><span class="p">(</span><span class="n">ysolve</span><span class="p">,</span><span class="n">Ymax</span><span class="p">,</span><span class="n">Bmax</span><span class="p">)</span>
<span class="n">perimeter</span> <span class="o">=</span> <span class="n">PerPara</span><span class="p">(</span><span class="n">ysolve</span><span class="p">,</span><span class="n">Ymax</span><span class="p">,</span><span class="n">Bmax</span><span class="p">)</span>
<span class="n">radius</span> <span class="o">=</span> <span class="n">area</span><span class="o">/</span><span class="n">perimeter</span>
<span class="n">Qout</span> <span class="o">=</span> <span class="n">Qman</span><span class="p">(</span><span class="mf">1.49</span><span class="p">,</span><span class="n">Mann</span><span class="p">,</span><span class="n">area</span><span class="p">,</span><span class="n">radius</span><span class="p">,</span><span class="n">Slope</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;y_n is&quot;</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="n">ysolve</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="s2">&quot; feet </span><span class="se">\n</span><span class="s2">Computed Discharge is &quot;</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="n">Qout</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="s2">&quot; CFS&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Flow Balance Error is &quot;</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="n">Qout</span> <span class="o">-</span> <span class="n">Qdesign</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>y_n is 1.52677  feet 
Computed Discharge is  80.0  CFS
Flow Balance Error is  0.0
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./lessons/uniformflow"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="../momentum/contractions.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Supercritical Contractions and Expansions</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="gutters.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">Gutter Flow and Gravity Sewer Design</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Theodore G. Cleveland (the JupyterBook parts)<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>